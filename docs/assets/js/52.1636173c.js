(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{353:function(e,t,a){"use strict";a.r(t);var v=a(6),s=Object(v.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"avassetreader"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#avassetreader"}},[e._v("#")]),e._v(" AVAssetReader")]),e._v(" "),t("p",[e._v("AVAssetReader是"),t("code",[e._v("AVFoundation")]),e._v("​中的一个读取器对象")]),e._v(" "),t("ul",[t("li",[e._v("1、直接从存储中读取原始未解码的媒体样本，获取解码为可渲染形式的样本：从mp4文件中拿到h264，并对其进行解码拿到可渲染的样本")]),e._v(" "),t("li",[e._v("2、混合资产的多个音轨，并使用和组合多个视频音轨")])]),e._v(" "),t("h2",{attrs:{id:"avassetreader-类结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#avassetreader-类结构"}},[e._v("#")]),e._v(" AVAssetReader 类结构")]),e._v(" "),t("p",[e._v("​"),t("img",{attrs:{src:"http://xingyajie.oss-cn-hangzhou.aliyuncs.com/uPic/815.png",alt:"img"}}),e._v("​")]),e._v(" "),t("p",[e._v("AVAssetReaderOutPut包含三种类型的输出")]),e._v(" "),t("ul",[t("li",[e._v("AVAssetReaderTrackOutput：用于从"),t("code",[e._v("AVAssetReader")]),e._v("​存储中读取单个轨道的媒体样本")]),e._v(" "),t("li",[e._v("AVAssetReaderAudioMixOutput：用于读取音频样本")]),e._v(" "),t("li",[e._v("AVAssetReaderVideoCompositionOutput：用于读取一个或多个轨道中的帧合成的视频帧")])]),e._v(" "),t("h2",{attrs:{id:"avassetreader读取视频流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#avassetreader读取视频流程"}},[e._v("#")]),e._v(" AVAssetReader读取视频流程")]),e._v(" "),t("ul",[t("li",[e._v("从"),t("code",[e._v("AVAssetReader")]),e._v("​存储中M获取mov/mp4视频文件，将视频文件解压缩，即解码，还原成"),t("code",[e._v("CMSampleBufferRef")]),e._v("​图像数据")]),e._v(" "),t("li",[e._v("从"),t("code",[e._v("CMSampleBufferRef")]),e._v("​中将图像数据读取到"),t("code",[e._v("CVPixelBufferRef")]),e._v("​视频像素缓存区")]),e._v(" "),t("li",[e._v("利用"),t("code",[e._v("CVPixelBufferRef")]),e._v("​像素缓存区数据 和 "),t("code",[e._v("CVMetalTextureCacheRef")]),e._v("​纹理缓存区数据 创建metal纹理缓存区"),t("code",[e._v("CVMetalTextureRef")]),e._v("​")]),e._v(" "),t("li",[e._v("将metal纹理缓存区"),t("code",[e._v("CVMetalTextureRef")]),e._v("​的数据转换成metal纹理"),t("code",[e._v("id<MTLTexture>")]),e._v("​")]),e._v(" "),t("li",[e._v("将mental纹理"),t("code",[e._v("id<MTLTexture>")]),e._v("​传递到"),t("code",[e._v("GPU")]),e._v("​中的片元着色函数")])]),e._v(" "),t("p",[e._v("​"),t("img",{attrs:{src:"http://xingyajie.oss-cn-hangzhou.aliyuncs.com/uPic/1200-20220822143519788.png",alt:"img"}}),e._v("​")])])}),[],!1,null,null,null);t.default=s.exports}}]);