(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{381:function(a,t,e){"use strict";e.r(t);var v=e(6),r=Object(v.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h2",{attrs:{id:"pcm存在问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pcm存在问题"}},[a._v("#")]),a._v(" PCM存在问题")]),a._v(" "),t("p",[a._v("PCM是音频文件元数据，并不包含采样率、声道数、位深度等参数。播放器不知道相关参数无法直接读取")]),a._v(" "),t("h2",{attrs:{id:"wav文件格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wav文件格式"}},[a._v("#")]),a._v(" WAV文件格式")]),a._v(" "),t("ul",[t("li",[a._v("WAV、AVI文件都是基于RIFF标准的文件格式")]),a._v(" "),t("li",[a._v("RIFF（Resource Interchange File Format，资源交换文件格式）由Microsoft和IBM提出")]),a._v(" "),t("li",[a._v("所以WAV、AVI文件的最前面4个字节都是RIFF四个字符")])]),a._v(" "),t("p",[a._v("​"),t("img",{attrs:{src:"http://xingyajie.oss-cn-hangzhou.aliyuncs.com/uPic/497279-20210319021131588-1269411109.png",alt:"WAV文件格式"}}),a._v("​")]),a._v(" "),t("p",[a._v("每一个chunk（数据块）都由3部分组成：")]),a._v(" "),t("ul",[t("li",[a._v("id：chunk的标识")]),a._v(" "),t("li",[a._v("data size：chunk的数据部分大小，字节为单位")]),a._v(" "),t("li",[a._v("data，chunk的数据部分")])]),a._v(" "),t("p",[a._v("整个WAV文件是一个RIFF chunk，它的data由3部分组成：")]),a._v(" "),t("ul",[t("li",[t("p",[a._v("format：文件类型")])]),a._v(" "),t("li",[t("p",[a._v("fmt chunk")]),a._v(" "),t("ul",[t("li",[a._v("音频参数相关的chunk")]),a._v(" "),t("li",[a._v("它的data里面有采样率、声道数、位深度等参数信息")])])]),a._v(" "),t("li",[t("p",[a._v("data chunk")]),a._v(" "),t("ul",[t("li",[a._v("音频数据相关的chunk")]),a._v(" "),t("li",[a._v("它的data就是真正的音频数据（比如PCM数据）")])])])]),a._v(" "),t("p",[a._v("RIFF chunk除去data chunk的data（音频数据）后，剩下的内容可以称为：WAV文件头，一般是44字节。")]),a._v(" "),t("h2",{attrs:{id:"pcm转成wav命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pcm转成wav命令"}},[a._v("#")]),a._v(" PCM转成WAV命令")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ffmpeg -ar 44100 -ac 2 -f s16le -i out.pcm out.wav\n")])])]),t("p",[a._v("需要注意的是：上面命令生成的WAV文件头有78字节。对比44字节的文件头，它多增加了一个34字节大小的LIST chunk。")]),a._v(" "),t("p",[a._v("关于LIST chunk的参考资料：")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://stackoverflow.com/questions/63929283/what-is-a-list-chunk-in-a-riff-wav-header",target:"_blank",rel:"noopener noreferrer"}},[a._v("What is a “LIST” chunk in a RIFF/Wav header?"),t("OutboundLink")],1)]),a._v(" "),t("li",[t("a",{attrs:{href:"https://www.recordingblogs.com/wiki/list-chunk-of-a-wave-file",target:"_blank",rel:"noopener noreferrer"}},[a._v("List chunk (of a RIFF file)"),t("OutboundLink")],1)])]),a._v(" "),t("p",[a._v("加上一个输出文件参数*-bitexact*可以去掉LIST Chunk。")]),a._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("ffmpeg -ar 44100 -ac 2 -f s16le -i out.pcm -bitexact out2.wav\n")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);