(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{359:function(t,n,s){"use strict";s.r(n);var a=s(6),i=Object(a.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"数据链路层"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据链路层"}},[t._v("#")]),t._v(" 数据链路层")]),t._v(" "),n("p",[t._v("链路：从1个节点到相邻节点的一段物理线路，中间没有其他交换节点")]),t._v(" "),n("p",[t._v("数据链路：在一条链路上传输数据时，需要有对应的通信协议来控制数据的传输")]),t._v(" "),n("p",[t._v("不同类型的数据链路，所用的通信协议可能是不同的\n广播信道：CSMA/CD协议（比如同轴电缆，集线器等组成的网络）\n点对点信道：PPP协议（比如两个路由器之前的信道）")]),t._v(" "),n("p",[t._v("数据链路层的3个基本问题\n封装成帧、透明传输、差错校验")]),t._v(" "),n("h3",{attrs:{id:"封装成帧"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#封装成帧"}},[t._v("#")]),t._v(" 封装成帧")]),t._v(" "),n("p",[n("img",{attrs:{src:"http://xingyajie.oss-cn-hangzhou.aliyuncs.com/uPic/%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7.png",alt:"封装成帧"}})]),t._v(" "),n("p",[t._v("帧（Frame）的数据部分 就是网络层传递下来的数据包（IP数据包，Packet）\n最大传输单元MTU（Maximum Transfer Unit） 每一种数据链路层协议都规定了所能够传送的帧的数据长度上限 以太网的MTU为1500个字节")]),t._v(" "),n("h3",{attrs:{id:"透明传输"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#透明传输"}},[t._v("#")]),t._v(" 透明传输")]),t._v(" "),n("p",[n("img",{attrs:{src:"http://xingyajie.oss-cn-hangzhou.aliyuncs.com/uPic/%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%93.jpg",alt:"透明传输"}})]),t._v(" "),n("p",[n("img",{attrs:{src:"http://xingyajie.oss-cn-hangzhou.aliyuncs.com/uPic/%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%932.jpg",alt:"透明传输2"}})]),t._v(" "),n("p",[t._v("使用SOH（Start Of Header）作为帧开始符\n使用EOT（End Of Transmission）作为帧结束符\n数据部分一旦出现了SOH、EOT，就需要进行转义")]),t._v(" "),n("h3",{attrs:{id:"差错校验"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#差错校验"}},[t._v("#")]),t._v(" 差错校验")]),t._v(" "),n("p",[n("img",{attrs:{src:"http://xingyajie.oss-cn-hangzhou.aliyuncs.com/uPic/%E5%B7%AE%E9%94%99%E6%A0%A1%E9%AA%8C.jpg",alt:"差错校验"}})]),t._v(" "),n("p",[t._v("FCS是根据数据部分 + 首部计算得出的")]),t._v(" "),n("p",[t._v("CSMA/CD协议\nCSMA/CD（Carrier Sense Multiple Access with Collision Detectio）\n载波侦听多路访问/冲突检测")]),t._v(" "),n("p",[t._v("使用了CSMA/CD的网络可以称为是以太网（Ethernet），它传输的是以太网帧\n以太网帧的格式有：Ethernet V2标准、IEEE的802.3标准 使用最多的是：Ethernet V2标准")]),t._v(" "),n("p",[t._v("为了能够检测正在发送的帧是否产生了冲突，以太网的帧至少要64字节")]),t._v(" "),n("p",[t._v("用交换机组建的网络，已经支持全双工通信，不需要再使用CSMA/CD，但它传输的帧依然是以太网帧 所以，用交换机组建的网络，依然可以叫做以太网")]),t._v(" "),n("p",[t._v("Ethernet V2帧的格式")]),t._v(" "),n("p",[t._v("![Ethernet V2帧的格式](http://xingyajie.oss-cn-hangzhou.aliyuncs.com/uPic/Ethernet V2%E5%B8%A7%E7%9A%84%E6%A0%BC%E5%BC%8F.jpg)")]),t._v(" "),n("p",[t._v("首部：目标MAC +源MAC + 网络类型\n以太网帧：首部 + 数据 + FCS\n数据的长度至少是：64 – 6 – 6 – 2 – 4 = 46字节")]),t._v(" "),n("p",[t._v("Ethernet V2 标准")]),t._v(" "),n("p",[t._v("![Ethernet V2标准](http://xingyajie.oss-cn-hangzhou.aliyuncs.com/uPic/Ethernet V2%E6%A0%87%E5%87%86.jpg)")]),t._v(" "),n("p",[t._v("当数据部分的长度小于46字节时\n数据链路层会在数据的后面加入一些字节填充\n接收端会将添加的字节去掉\n长度总结\n以太网帧的数据长度：46"),n("s",[t._v("1500字节")]),t._v("​"),n("s",[t._v("以太网帧的长度：64")]),t._v("1518字节（目标MAC +源MAC + 网络类型 + 数据 + FCS）")]),t._v(" "),n("p",[t._v("网卡")]),t._v(" "),n("p",[n("img",{attrs:{src:"http://xingyajie.oss-cn-hangzhou.aliyuncs.com/uPic/%E7%BD%91%E5%8D%A1.jpg",alt:"网卡"}})]),t._v(" "),n("p",[t._v("网卡接收到一个帧，首先会进行差错校验，如果校验通过则接收，否则丢弃\nWireshark抓到的帧没有FCS ，因为它抓到的是差错校验通过的帧（帧尾的FCS会被硬件去掉）\nWireshark抓不到差错校验失败的帧")]),t._v(" "),n("p",[t._v("PPP协议（Point to Point Protocol）")]),t._v(" "),n("p",[n("img",{attrs:{src:"http://xingyajie.oss-cn-hangzhou.aliyuncs.com/uPic/PPP%E5%8D%8F%E8%AE%AE.jpg",alt:"PPP协议"}})]),t._v(" "),n("p",[t._v("Address字段：图中的值是0xFF，形同虚设，点到点信道不需要源MAC、目标MAC地址\nControl字段：图中的值是0x03，目前没有什么作用\nProtocol字段：内部用到的协议类型 帧开始符、帧结束符：0x7E\nPPP协议--字节填充\n将0x7E替换成0x7D5E\n将0x7D替换成0x7D5D")]),t._v(" "),n("p",[n("img",{attrs:{src:"http://xingyajie.oss-cn-hangzhou.aliyuncs.com/uPic/PPP%E5%8D%8F%E8%AE%AE-%E5%AD%97%E8%8A%82%E5%A1%AB%E5%85%85.jpg",alt:"PPP协议-字节填充"}})])])}),[],!1,null,null,null);n.default=i.exports}}]);