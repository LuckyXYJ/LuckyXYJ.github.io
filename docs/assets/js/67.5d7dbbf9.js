(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{365:function(a,_,t){"use strict";t.r(_);var v=t(6),e=Object(v.a)({},(function(){var a=this,_=a._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[_("h2",{attrs:{id:"一、libfdk-aac编码要求"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#一、libfdk-aac编码要求"}},[a._v("#")]),a._v(" 一、libfdk_aac编码要求")]),a._v(" "),_("p",[a._v("fdk-aac对输入的PCM数据是有"),_("a",{attrs:{href:"https://wiki.hydrogenaud.io/index.php?title=Fraunhofer_FDK_AAC#Sample_Format",target:"_blank",rel:"noopener noreferrer"}},[a._v("参数要求"),_("OutboundLink")],1),a._v("的，如果参数不对，会出现错误")]),a._v(" "),_("h3",{attrs:{id:"采样格式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#采样格式"}},[a._v("#")]),a._v(" 采样格式")]),a._v(" "),_("p",[a._v("必须是16位整数PCM。")]),a._v(" "),_("h3",{attrs:{id:"采样率"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#采样率"}},[a._v("#")]),a._v(" 采样率")]),a._v(" "),_("p",[a._v("支持的采样率有（Hz）：")]),a._v(" "),_("ul",[_("li",[a._v("8000、11025、12000、16000、22050、24000、32000")]),a._v(" "),_("li",[a._v("44100、48000、64000、88200、96000")])]),a._v(" "),_("h2",{attrs:{id:"二、命令行进行编码"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#二、命令行进行编码"}},[a._v("#")]),a._v(" 二、命令行进行编码")]),a._v(" "),_("h3",{attrs:{id:"基本使用"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#基本使用"}},[a._v("#")]),a._v(" 基本使用")]),a._v(" "),_("p",[a._v("最简单的用法如下所示：")]),a._v(" "),_("div",{staticClass:"language-sh extra-class"},[_("pre",{pre:!0,attrs:{class:"language-sh"}},[_("code",[_("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# pcm -> aac")]),a._v("\nffmpeg -ar "),_("span",{pre:!0,attrs:{class:"token number"}},[a._v("44100")]),a._v(" -ac "),_("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" -f s16le -i in.pcm -c:a libfdk_aac out.aac\n \n"),_("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# wav -> aac")]),a._v("\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 为了简化指令，本文后面会尽量使用in.wav取代in.pcm")]),a._v("\nffmpeg -i in.wav -c:a libfdk_aac out.aac\n")])])]),_("ul",[_("li",[_("p",[_("em",[a._v("-ar 44100 -ac 2 -f s16le")])]),a._v(" "),_("ul",[_("li",[a._v("PCM输入数据的参数")])])]),a._v(" "),_("li",[_("p",[_("em",[a._v("-c:a")])]),a._v(" "),_("ul",[_("li",[_("p",[a._v("设置音频编码器")])]),a._v(" "),_("li",[_("p",[a._v("c表示codec（编解码器），a表示audio（音频）")])]),a._v(" "),_("li",[_("p",[a._v("等价写法")]),a._v(" "),_("ul",[_("li",[_("em",[a._v("-codec:a")])]),a._v(" "),_("li",[_("em",[a._v("-acodec")])])])]),a._v(" "),_("li",[_("p",[a._v("需要注意的是：这个参数要写在aac文件那边，也就是属于输出参数")])])])])]),a._v(" "),_("p",[a._v("默认生成的aac文件是LC规格的。")]),a._v(" "),_("div",{staticClass:"language-sh extra-class"},[_("pre",{pre:!0,attrs:{class:"language-sh"}},[_("code",[a._v("ffprobe out.aac\n \n"),_("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 输出结果如下所示")]),a._v("\nAudio: aac "),_("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("LC"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(", "),_("span",{pre:!0,attrs:{class:"token number"}},[a._v("44100")]),a._v(" Hz, stereo, fltp, "),_("span",{pre:!0,attrs:{class:"token number"}},[a._v("120")]),a._v(" kb/s\n")])])]),_("h3",{attrs:{id:"常用参数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#常用参数"}},[a._v("#")]),a._v(" "),_("a",{attrs:{href:"https://ffmpeg.org/ffmpeg-all.html#libfdk_005faac",target:"_blank",rel:"noopener noreferrer"}},[a._v("常用参数"),_("OutboundLink")],1)]),a._v(" "),_("ul",[_("li",[_("p",[a._v("-b:a")]),a._v(" "),_("ul",[_("li",[a._v("设置输出比特率")]),a._v(" "),_("li",[a._v("比如*-b:a 96k*")])])])]),a._v(" "),_("div",{staticClass:"language-sh extra-class"},[_("pre",{pre:!0,attrs:{class:"language-sh"}},[_("code",[a._v("复制代码\nShell\nffmpeg -i in.wav -c:a libfdk_aac -b:a 96k out.aac\n")])])]),_("ul",[_("li",[_("p",[a._v("-profile:a")]),a._v(" "),_("ul",[_("li",[_("p",[a._v("设置输出规格")])]),a._v(" "),_("li",[_("p",[a._v("取值有：")]),a._v(" "),_("ul",[_("li",[a._v("aac_low：Low Complexity AAC (LC)，默认值")]),a._v(" "),_("li",[a._v("aac_he：High Efficiency AAC (HE-AAC)")]),a._v(" "),_("li",[a._v("aac_he_v2：High Efficiency AAC version 2 (HE-AACv2)")]),a._v(" "),_("li",[a._v("aac_ld：Low Delay AAC (LD)")]),a._v(" "),_("li",[a._v("aac_eld：Enhanced Low Delay AAC (ELD)")])])]),a._v(" "),_("li",[_("p",[a._v("一旦设置了输出规格，会自动设置一个合适的输出比特率")]),a._v(" "),_("ul",[_("li",[a._v("也可以用过*-b:a*自行设置输出比特率")])])])])])]),a._v(" "),_("div",{staticClass:"language-sh extra-class"},[_("pre",{pre:!0,attrs:{class:"language-sh"}},[_("code",[a._v("ffmpeg -i in.wav -c:a libfdk_aac -profile:a aac_he_v2 -b:a 32k out.aac\n")])])]),_("ul",[_("li",[_("p",[a._v("-vbr")]),a._v(" "),_("ul",[_("li",[_("p",[a._v("开启"),_("a",{attrs:{href:"https://wiki.hydrogenaud.io/index.php?title=Fraunhofer_FDK_AAC#Bitrate_Modes",target:"_blank",rel:"noopener noreferrer"}},[a._v("VBR"),_("OutboundLink")],1),a._v("模式（Variable Bit Rate，可变比特率）")])]),a._v(" "),_("li",[_("p",[a._v("如果开启了VBR模式，"),_("em",[a._v("-b:a")]),a._v("选项将会被忽略，但*-profile:a*选项仍然有效")])]),a._v(" "),_("li",[_("p",[a._v("取值范围是0 ~ 5")]),a._v(" "),_("ul",[_("li",[a._v("0：默认值，关闭VBR模式，开启CBR模式（Constant Bit Rate，固定比特率）")]),a._v(" "),_("li",[a._v("1：质量最低（但是音质仍旧很棒）")]),a._v(" "),_("li",[a._v("5：质量最高")])])])])])]),a._v(" "),_("table",[_("thead",[_("tr",[_("th",[a._v("VBR")]),a._v(" "),_("th",[a._v("kbps/channel")]),a._v(" "),_("th",[a._v("AOTs")])])]),a._v(" "),_("tbody",[_("tr",[_("td",[a._v("1")]),a._v(" "),_("td",[a._v("20-32")]),a._v(" "),_("td",[a._v("LC、HE、HEv2")])]),a._v(" "),_("tr",[_("td",[a._v("2")]),a._v(" "),_("td",[a._v("32-40")]),a._v(" "),_("td",[a._v("LC、HE、HEv2")])]),a._v(" "),_("tr",[_("td",[a._v("3")]),a._v(" "),_("td",[a._v("48-56")]),a._v(" "),_("td",[a._v("LC、HE、HEv2")])]),a._v(" "),_("tr",[_("td",[a._v("4")]),a._v(" "),_("td",[a._v("64-72")]),a._v(" "),_("td",[a._v("LC")])]),a._v(" "),_("tr",[_("td",[a._v("5")]),a._v(" "),_("td",[a._v("96-112")]),a._v(" "),_("td",[a._v("LC")])])])]),a._v(" "),_("p",[a._v("AOT是Audio Object Type的简称。")]),a._v(" "),_("div",{staticClass:"language-sh extra-class"},[_("pre",{pre:!0,attrs:{class:"language-sh"}},[_("code",[a._v("ffmpeg -i in.wav -c:a libfdk_aac -vbr "),_("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v(" out.aac\n")])])]),_("h3",{attrs:{id:"文件格式"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#文件格式"}},[a._v("#")]),a._v(" 文件格式")]),a._v(" "),_("p",[a._v("AAC编码的文件扩展名主要有3种：aac、m4a、mp4。")]),a._v(" "),_("div",{staticClass:"language-sh extra-class"},[_("pre",{pre:!0,attrs:{class:"language-sh"}},[_("code",[_("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# m4a")]),a._v("\nffmpeg -i in.wav -c:a libfdk_aac out.m4a\n \n"),_("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# mp4")]),a._v("\nffmpeg -i in.wav -c:a libfdk_aac out.mp4\n")])])]),_("h2",{attrs:{id:"三、编程进行编码"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#三、编程进行编码"}},[a._v("#")]),a._v(" 三、编程进行编码")]),a._v(" "),_("ul",[_("li",[_("p",[a._v("变量定义")])]),a._v(" "),_("li",[_("p",[a._v("获取编码器")])]),a._v(" "),_("li",[_("p",[a._v("检查采样格式")])]),a._v(" "),_("li",[_("p",[a._v("创建上下文")])]),a._v(" "),_("li",[_("p",[a._v("打开编码器")])]),a._v(" "),_("li",[_("p",[a._v("创建AVFrame")]),a._v(" "),_("ul",[_("li",[a._v("AVFrame用来存放编码前的数据。")])])]),a._v(" "),_("li",[_("p",[a._v("创建AVPacket")])]),a._v(" "),_("li",[_("p",[a._v("打开文件")])]),a._v(" "),_("li",[_("p",[a._v("开始编码")])]),a._v(" "),_("li",[_("p",[a._v("资源回收")])])])])}),[],!1,null,null,null);_.default=e.exports}}]);